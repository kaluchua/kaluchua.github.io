<!DOCTYPE html>
<html lang="en">
<head>
        <title>Kaluchua</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link href="/" type="application/atom+xml" rel="alternate" title="Kaluchua ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie.css"/>
                <script src="/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="/css/ie6.css"/><![endif]-->
                <link rel="icon" type="image/png" href="favi.png">

</head>

<body>
<header>
    <h1><a href="" id="site-title"></a> :
        <a href="/posts/example-of-monoid-instance/" id="page-title">Example of monoid instance</a></h1>
</header>
<article>
    <h2>Monoide instance for liste of Maybe type</h2>
<p>As <code>[a]</code> is a <strong>Monoid</strong> define by,</p>
<div class="highlight"><pre><span class="n">instance</span> <span class="n">Monoid</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="n">where</span>
        <span class="n">mempty</span>  <span class="o">=</span> <span class="p">[]</span>
        <span class="n">mappend</span> <span class="o">=</span> <span class="p">(</span><span class="o">++</span><span class="p">)</span>
</pre></div>


<p>Then <code>Maybe [a]</code> is also a <strong>Monoid</strong>,</p>
<div class="highlight"><pre><span class="n">instance</span> <span class="n">Monoid</span> <span class="n">a</span> <span class="o">=&gt;</span> <span class="n">Monoid</span> <span class="p">(</span><span class="n">Maybe</span> <span class="n">a</span><span class="p">)</span> <span class="n">where</span>
    <span class="n">mempty</span> <span class="o">=</span> <span class="n">Nothing</span>
    <span class="n">Nothing</span> <span class="err">`</span><span class="n">mappend</span><span class="err">`</span> <span class="n">m</span> <span class="o">=</span> <span class="n">m</span>
    <span class="n">m</span> <span class="err">`</span><span class="n">mappend</span><span class="err">`</span> <span class="n">Nothing</span> <span class="o">=</span> <span class="n">m</span>
    <span class="n">Just</span> <span class="n">m1</span> <span class="err">`</span><span class="n">mappend</span><span class="err">`</span> <span class="n">Just</span> <span class="n">m2</span> <span class="o">=</span> <span class="n">Just</span> <span class="p">(</span><span class="n">m1</span> <span class="err">`</span><span class="n">mappend</span><span class="err">`</span> <span class="n">m2</span><span class="p">)</span>
</pre></div>


<p>Note the type constraint in the instance declaration which impose <code>a</code> to be a Monoid or else <code>Maybe a</code> won't.</p>
<p>We can then use mappend, <code>(&lt;&gt;)</code>, to chain our recursive call at the condition to transform the head of the list to a singleton.</p>
<div class="highlight"><pre><span class="n">import</span> <span class="n">Data</span><span class="p">.</span><span class="n">Monoid</span> <span class="p">((</span><span class="o">&lt;&gt;</span><span class="p">))</span>

<span class="n">myReverse</span> <span class="o">::</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="n">Maybe</span> <span class="p">[</span><span class="n">a</span><span class="p">]</span>
<span class="n">myReverse</span> <span class="p">[]</span>     <span class="o">=</span> <span class="n">Nothing</span>
<span class="n">myReverse</span> <span class="p">(</span><span class="n">x</span><span class="o">:</span><span class="n">xs</span><span class="p">)</span> <span class="o">=</span> <span class="n">myReverse</span> <span class="n">xs</span> <span class="o">&lt;&gt;</span> <span class="n">Just</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
</pre></div>


<p>Last note, the previous fold solution can be improve too.</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">let</span> <span class="n">mrev</span> <span class="o">=</span> <span class="n">foldl</span><span class="err">&#39;</span> <span class="p">(</span><span class="err">\</span><span class="n">x</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">Just</span> <span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">&lt;&gt;</span> <span class="n">x</span> <span class="p">)</span> <span class="n">Nothing</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mrev</span> <span class="p">[]</span>
<span class="n">Nothing</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">mrev</span> <span class="s">&quot;hello&quot;</span>
<span class="n">Just</span> <span class="s">&quot;olleh&quot;</span>
</pre></div>
</article>

        <footer>
            <nav>
                <ul>
                    <li><a href="/tags.html">Tags</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Th√®me mnmlist</a></p>
        </footer>

</body>
</html>